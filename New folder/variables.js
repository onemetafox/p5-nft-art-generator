class Random{constructor(e){this.seed=e,this.originalSeed=e}randDec(){return this.seed^=this.seed<<13,this.seed^=this.seed>>17,this.seed^=this.seed<<5,(this.seed<0?1+~this.seed:this.seed)%1e3/1e3}randNum(e,a){return e+(a-e)*this.randDec()}randInt(e,a){return Math.floor(this.randNum(e,a+1))}reset(){this.seed=this.originalSeed}}var sww=700,shh=840;let canvas;const st_deviation=50,layers=80;var left_x,right_x,top_y,bottom_y,resolution,num_columns,num_rows,grid,offset;let img,easing=.05;var imgList=[image11+image12+image13+image14+image15,image21+image22+image23+image24+image25+image26+image27,image31+image32+image33+image34+image35+image36+image37,image41+image42+image43+image44+image45+image46,image51+image52+image53+image54+image55];const num_steps=200,step_length=5;let angoff=0,shapecolors=[],pentagons=[],x1=[],y1=[],x2=[],y2=[];var pp=[[300,-300],[300,-100],[300,100],[300,300],[300,500]];let tokenData={hash:random_hash(),tokenId:"123000456"};const defaultSize=1e3,ratio=.83;let hh=shh,ww=sww,dim=Math.min(ww,hh),M=dim/1e3;console.log(`M: ${M}`),console.log(`Hash: ${tokenData.hash}`);const seed=parseInt(tokenData.hash.slice(0,16),16);console.log(`Seed: ${seed}`);const R=new Random(seed);function random_hash(){let e="0123456789abcdef",a="0x";for(let s=64;s>0;--s)a+=e[Math.floor(Math.random()*e.length)];return a}
// function createStretchedPentagon(a,e){return[createVector(910+randomGaussian(0,a)+e,320+e),createVector(830.9188309203678+randomGaussian(0,a)+e,510.9188309203678+e),createVector(640+randomGaussian(0,a)+e,590+e),createVector(449.0811690796322+randomGaussian(0,a)+e,510.91883092036784+e),createVector(370+randomGaussian(0,a)+e,320.00000000000006+e),createVector(449.0811690796321+randomGaussian(0,a)+e,129.0811690796322+e),createVector(640+randomGaussian(0,a)+e,50+e),createVector(830.9188309203678+randomGaussian(0,a)+e,129.08116907963213+e)]}function myFlowField(a,e,t){for(var n=0;n<t;n++){var r=a-left_x,o=e-top_y,s=Math.round(r/resolution),i=Math.round(o/resolution);s>=num_columns&&(s=num_columns-1),i>=num_rows&&(i=num_rows-1);var u=grid[s][i],c=Math.abs(step_length*cos(u)),l=Math.abs(step_length*sin(u));ellipse(a,e,30*c,30*l),a+=c,e+=l}}function drawCustomShape(a,e){for(let t=0;t<layers;t+=1){let t=polygon(a,1);fill(e),beginShape();for(let a of t)vertex(a.x,a.y);let n=getXmax(t),r=getYmax(t);for(let a=0;a<100;a+=1){let a=random(0,n),e=random(0,r),t=1e3*Math.abs(randomGaussian(n,.03)-randomGaussian(n,.02));ellipse(a,e,t,t)}endShape(CLOSE)}}function getXmax(a){let e=a[0].x;for(let t=0;t<a.length;t+=1)e<a[t].x&&(e=a[t].x);return e}function getYmax(a){let e=a[0].y;for(let t=0;t<a.length;t+=1)e<a[t].y&&(e=a[t].y);return e}function polygon(a,e){if(e>=7)return a;{const t=[];for(let e in a){t.push(a[e]);let n=int(e)+1;try{const r=createVector((a[n].x+a[e].x)/2,(a[n].y+a[e].y)/2),o=randomGaussian(0,st_deviation),s=randomGaussian(0,st_deviation);r.add(o,s),t.push(r)}catch(n){const r=createVector((a[0].x+a[e].x)/2,(a[0].y+a[e].y)/2),o=randomGaussian(0,st_deviation),s=randomGaussian(0,st_deviation);r.add(o,s),t.push(r)}}return polygon(t,e+1)}}
// function preload(){img=loadImage(imgList[random([1,2,3,4,5])]),angoff=PI/180*random(0,360),left_x=Math.round(-.5*ww),right_x=Math.round(1.5*ww),top_y=Math.round(-.5*hh),bottom_y=Math.round(1.5*hh),resolution=Math.round(.01*ww),num_columns=Math.round((right_x-left_x)/resolution),num_rows=Math.round((bottom_y-top_y)/resolution),grid=new Array(num_columns);for(var o=0;o<num_columns;o++)grid[o]=new Array(num_rows);for(pentagons=[],shapecolors=[],o=0;o<5;o++)pentagons.push(createStretchedPentagon(pp[o][0],pp[o][1])),shapecolors.push([random(0,150),random(0,150),random(0,150),10]);for(x1=[],y1=[],x2=[],y2=[],o=0;o<10;o++)x1.push(random(0,ww/2)),y1.push(random(0,hh/2)),x2.push(random(ww/2,ww)),y2.push(random(0,hh/2))}function setup(){noStroke(),canvas=createCanvas(ww,hh),background(255);for(var o=0;o<5;o++)drawCustomShape(pentagons[o],shapecolors[o]);beginShape();for(var n=0;n<num_columns;n++)for(var r=0;r<num_rows;r++){var a=.01*parseFloat(n),e=.01*parseFloat(r),t=noise(a,e);angle=map(t,0,1,0,TWO_PI)+radians(100),grid[n][r]=angle}var h=color(255,255,255);for(h.setAlpha(2),fill(h),o=0;o<10;o++)myFlowField(x1[o],y1[o],num_steps);for(o=0;o<10;o++)myFlowField(x2[o],y2[o],num_steps);endShape(),tint(255,180),translate(ww/2,hh/2),rotate(angoff),imageMode(CENTER),image(img,0,0,1.5*ww,1.25*hh)}function draw(){noStroke();let o=color(191,185,185);fill(o),rect(0,0,12,hh),rect(0,0,ww,12),rect(0,hh-12,ww,hh),rect(ww-12,0,ww,hh)}function windowResized(){hh=window.innerHeight,ww=hh*ratio;const o=Math.min(ww,hh);M=o/defaultSize,console.log(`M: ${M}`),R.reset(),resizeCanvas(ww,hh),setup()}